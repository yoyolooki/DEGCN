load('KICH.Rdata')
load('KIRC.Rdata')
load('KIRP.Rdata')
#合并fpkm
filter_KICH_fpkm<-t(filter_KICH_fpkm)
filter_KIRC_fpkm<-t(filter_KIRC_fpkm)
filter_KIRP_fpkm<-t(filter_KIRP_fpkm)
View(filter_KICH_fpkm)
View(filter_KIRC_fpkm)
View(filter_KIRP_fpkm)
rbin_KICH_KIRC=rbind(filter_KICH_fpkm, filter_KIRC_fpkm, filter_KIRP_fpkm)
View(rbin_KICH_KIRC)
rm(rbin_KICH_KIRC)
fpkm=rbind(filter_KICH_fpkm, filter_KIRC_fpkm, filter_KIRP_fpkm)
View(filter_KICH_gistic)
#合并gistic
filter_KICH_gistic<-t(filter_KICH_gistic)
filter_KIRC_gistic<-t(filter_KIRC_gistic)
filter_KIRP_gistic<-t(filter_KIRP_gistic)
View(filter_KICH_gistic)
View(filter_KIRC_gistic)
View(filter_KIRP_gistic)
gistic=rbind(filter_KICH_gistic, filter_KIRC_gistic, filter_KIRP_gistic)
View(gistic)
dim(fpkm)
dim(gistic)
#合并rppa
filter_KICH_rppa<-t(filter_KICH_rppa)
filter_KIRC_rppa<-t(filter_KIRC_rppa)
filter_KIRP_rppa<-t(filter_KIRP_rppa)
View(filter_KICH_rppa)
View(filter_KIRC_rppa)
View(filter_KIRP_rppa)
rppa=rbind(filter_KICH_rppa, filter_KIRC_rppa, filter_KIRP_rppa)
KICH_rppa_colnames<-colnames(filter_KICH_rppa)
KIRC_rppa_colnames<-colnames(KIRC_rppa_colnames)
KIRP_rppa_colnames<-colnames(KIRP_rppa_colnames)
KIRC_rppa_colnames<-colnames(filter_KIRC_rppa)
KIRP_rppa_colnames<-colnames(filter_KIRP_rppa)
KICH_rppa_colnames
intersection_1<-intersect(KICH_rppa_colnames, KIRC_rppa_colnames)
intersection_2<-intersect(intersection_1, KIRP_rppa_colnames)
length(intersection_2)  #63个
all_pro<-intersection_2
filter_KICH_rppa<-filter_KICH_rppa[,all_pro]
filter_KIRC_rppa<-filter_KIRC_rppa[,all_pro]
filter_KIRP_rppa<-filter_KIRP_rppa[,all_pro]
rppa=rbind(filter_KICH_rppa, filter_KIRC_rppa, filter_KIRP_rppa)
is.na(fpkm)  #检查是否有缺值
any(is.na(fpkm))  #检查是否有缺值
any(is.na(gistic))
any(is.na(rppa))
View(rppa)
colSums(is.na(rppa))
na_col_sum <- colSums(is.na(rppa))
na_col_indices <- which(na_col_sum > 0)
na_col_indices
length(na_col_indices)
library(dplyr)
rppa_filled <- rppa %>% mutate(across(where(is.numeric), ~ ifelse(is.na(.), mean(., na.rm = TRUE), .)))
rppa <- as.data.frame(rppa)
rppa_filled <- rppa %>% mutate(across(where(is.numeric), ~ ifelse(is.na(.), mean(., na.rm = TRUE), .)))
View(rppa_filled)
any(is.na(rppa_filled))
class(fpkm)
fpkm <- as.data.frame(fpkm)
gistic <- as.data.frame(gistic)
rppa <- rppa %>% mutate(across(where(is.numeric), ~ ifelse(is.na(.), mean(., na.rm = TRUE), .)))
any(is.na(rppa_filled))
save(fpkm, gistic, rppa, file = 'conbined_data.Rdata')
View(fpkm)
View(fpkm)
View(filter_KICH_fpkm)
?write.csv
write.csv(fpkm, file = 'fpkm.csv', sep = ',')
#write.csv(fpkm, file = 'fpkm.csv', sep = ',')
write.csv(rppa, file = 'rppa.csv', sep = ',')
#write.csv(fpkm, file = 'fpkm.csv', sep = ',')
write.csv(rppa, file = 'rppa.csv')
write.csv(fpkm, file = 'fpkm.csv')
write.csv(fpkm, file = 'fpkm.csv')
write.csv(gistic, file = 'gistic.csv')
#生成、保存标签数据
dim(filter_KICH_fpkm)
dim(filter_KIRC_fpkm)
dim(filter_KIRP_fpkm)
rownames(fpkm)
class(rownames(fpkm))
sample<-data.frame('sample':c(rownames(fpkm)),'label':)
sample<-data.frame('sample':c(rownames(fpkm)),'label')
sample<-data.frame('sample':c(rownames(fpkm)))
sample<-c(rownames(fpkm))
sample
sample_datafram<-data.frame(sample)
View(sample_datafram)
sample_datafram
label<-c(rep('0',63),rep('1',469),rep('2',213))
label
dim(label)
length(label)
View(fpkm)
cancer_subtype<-c(rep('KICH',63),rep('KIRC',469),rep('KIRP',213))
sample_datafram<-data.frame(sample,label,cancer_subtype)
View(sample_datafram)
write.csv(sample_datafram, file = 'sample_class')
write.csv(sample_datafram, file = 'sample_class.csv')
class(sample_datafram)
View(sample_datafram)
write.csv(sample_datafram, file = 'sample_class.csv',row.names = F)
write.csv(sample_datafram, file = 'sample_class.csv',row.names = F)
